
class PromptBuild():
    def __init__(self):
        pass

    def build_prompt(self, chunks_dict: list[dict], query: str):
        context_blocks = "\n".join(
                f"""–ß–∞–Ω–∫: {chunk_data["text"]}
            –ê–≤—Ç–æ—Ä: {chunk_data["author"]}
            –ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏: {chunk_data["name_book"]}
            –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–Ω–∏–≥–∏: {chunk_data["page"]}\n"""
                for chunk_data in chunks_dict
            )
        prompt = f"""–¢—ã ‚Äî –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç.  
                    –ù–µ –≤—ã–¥—É–º—ã–≤–∞–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –Ω–µ —Å—Å—ã–ª–∞–π—Å—è –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –æ–ø—ã—Ç. –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ ‚Äî —Ç–∞–∫ –∏ —Å–∫–∞–∂–∏.  
                    –û—Ç–≤–µ—á–∞–π –Ω–∞ –≤–æ–ø—Ä–æ—Å, –∏—Å–ø–æ–ª—å–∑—É—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –∫–Ω–∏–≥–∏.  

                    –ü—Ä–∞–≤–∏–ª–∞:
                    1. –ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –Ω–∏–∂–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ —Ç–µ–∫—Å—Ç–∞.  
                    2. –ù–µ –¥–æ–º—ã—Å–ª–∏–≤–∞–π –∏ –Ω–µ –¥–æ–±–∞–≤–ª—è–π –Ω–∏—á–µ–≥–æ –æ—Ç —Å–µ–±—è.  
                    3. –§–æ—Ä–º–∞—Ç–∏—Ä—É–π –æ—Ç–≤–µ—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Markdown-—Ä–∞–∑–º–µ—Ç–∫–∏** (–∏—Å–ø–æ–ª—å–∑—É–π —Å–ø–∏—Å–∫–∏, –≤—ã–¥–µ–ª–µ–Ω–∏–µ, –∑–∞–≥–æ–ª–æ–≤–∫–∏, —Ü–∏—Ç–∞—Ç—ã –∏ —Ç.–¥. –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏).  
                    4. –í –∫–æ–Ω—Ü–µ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞–π:
                    - üìò **–§—Ä–∞–≥–º–µ–Ω—Ç —Ç–µ–∫—Å—Ç–∞**, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –æ–ø–∏—Ä–∞–ª—Å—è  
                    - ‚úçÔ∏è **–ê–≤—Ç–æ—Ä –∫–Ω–∏–≥–∏**  
                    - üìñ **–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏**  
                    - üî¢ **–ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã**

                    ---

                    –ö–æ–Ω—Ç–µ–∫—Å—Ç:
                    {context_blocks}

                    –í–æ–ø—Ä–æ—Å:
                    {query}

                    –û—Ç–≤–µ—Ç:
                    """
        return prompt